---
title: "URDF & Xacro – Describing Complex Humanoid Bodies"
description: "Comprehensive guide to Unified Robot Description Format (URDF) and Xacro for describing complex humanoid robots with advanced kinematic structures."
tags: ["urdf", "xacro", "robot-description", "humanoid", "kinematics", "robot-modeling"]
sidebar_label: "Chapter 5: URDF & Xacro for Humanoid Bodies"
slug: "/modules/module1/chapter5"
keywords: ["URDF", "Xacro", "Robot Description", "Humanoid Robots", "Kinematics", "Robot Modeling"]
---

# URDF & Xacro – Describing Complex Humanoid Bodies

## Learning Objectives

By the end of this chapter, you will be able to:
- Create comprehensive URDF models for complex humanoid robots
- Utilize Xacro macros and properties to simplify complex robot descriptions
- Implement advanced kinematic structures with multiple degrees of freedom
- Integrate visual, collision, and inertial properties for realistic simulation
- Validate and debug robot descriptions using ROS 2 tools

## Introduction

Unified Robot Description Format (URDF) and its extension Xacro are fundamental tools for describing robot geometry, kinematics, and dynamics in ROS. For humanoid robots with complex multi-degree-of-freedom structures, URDF and Xacro provide the necessary framework to accurately model the intricate relationships between links and joints. This chapter provides a comprehensive guide to describing complex humanoid bodies, covering both basic URDF concepts and advanced Xacro techniques for managing the complexity inherent in humanoid robot models.

## Understanding URDF Fundamentals

### URDF Structure and Components

URDF (Unified Robot Description Format) is an XML-based format that describes robot models. A complete URDF model consists of:

- **Links**: Rigid bodies that make up the robot structure
- **Joints**: Connections between links that define kinematic relationships
- **Visual Elements**: Geometry and appearance for visualization
- **Collision Elements**: Simplified geometry for collision detection
- **Inertial Properties**: Mass, center of mass, and inertia for dynamics simulation

### Basic URDF Example

```xml
<?xml version="1.0"?>
<robot name="simple_robot">
  <!-- Base link -->
  <link name="base_link">
    <visual>
      <geometry>
        <cylinder length="0.6" radius="0.2"/>
      </geometry>
      <material name="blue">
        <color rgba="0 0 0.8 1"/>
      </material>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.6" radius="0.2"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="10"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <!-- Link connected via joint -->
  <link name="upper_leg">
    <visual>
      <geometry>
        <cylinder length="0.5" radius="0.05"/>
      </geometry>
      <origin xyz="0 0 -0.25"/>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.5" radius="0.05"/>
      </geometry>
      <origin xyz="0 0 -0.25"/>
    </collision>
    <inertial>
      <mass value="2"/>
      <inertia ixx="0.05" ixy="0.0" ixz="0.0" iyy="0.05" iyz="0.0" izz="0.005"/>
    </inertial>
  </link>

  <!-- Joint connecting links -->
  <joint name="hip_joint" type="revolute">
    <parent link="base_link"/>
    <child link="upper_leg"/>
    <origin xyz="0 0 -0.3" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <limit lower="-1.57" upper="1.57" effort="100" velocity="1"/>
  </joint>
</robot>
```

### Link Properties

Links represent rigid bodies in the robot model and can contain:

- **Visual**: How the link appears in visualization tools
- **Collision**: Geometry used for collision detection
- **Inertial**: Mass properties for dynamics simulation
- **Self-Collision**: Whether this link collides with itself

```xml
<link name="link_name">
  <!-- Visual representation -->
  <visual>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <!-- Supported geometries: box, cylinder, sphere, mesh -->
      <mesh filename="package://robot_description/meshes/link_name.dae"/>
    </geometry>
    <material name="red">
      <color rgba="1 0 0 1"/>
    </material>
  </visual>

  <!-- Collision geometry -->
  <collision>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <geometry>
      <cylinder length="0.1" radius="0.05"/>
    </geometry>
  </collision>

  <!-- Inertial properties -->
  <inertial>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <mass value="1.0"/>
    <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
  </inertial>
</link>
```

### Joint Properties

Joints define the kinematic relationships between links and come in several types:

- **Revolute**: Rotational joint with limited range
- **Continuous**: Rotational joint without limits
- **Prismatic**: Linear sliding joint
- **Fixed**: No movement between links
- **Floating**: 6 DOF joint (for base movement)
- **Planar**: Movement in a plane

```xml
<joint name="joint_name" type="revolute">
  <parent link="parent_link"/>
  <child link="child_link"/>
  <origin xyz="0.1 0 0" rpy="0 0 0"/>
  <axis xyz="0 0 1"/>
  <limit lower="-3.14" upper="3.14" effort="100" velocity="1"/>
  <dynamics damping="0.1" friction="0.0"/>
</joint>
```

## Advanced URDF Concepts for Humanoid Robots

### Kinematic Chains and Tree Structures

Humanoid robots typically have multiple kinematic chains that form a tree structure:

```
base_link
├── torso
│   ├── head
│   ├── left_arm
│   │   ├── left_forearm
│   │   └── left_hand
│   └── right_arm
│       ├── right_forearm
│       └── right_hand
└── left_leg
    ├── left_lower_leg
    └── left_foot
└── right_leg
    ├── right_lower_leg
    └── right_foot
```

### Complex Joint Types for Humanoid Articulation

Humanoid robots require specialized joint configurations to mimic human-like movement:

```xml
<!-- Spherical joint approximation using multiple revolute joints -->
<joint name="left_shoulder_pitch" type="revolute">
  <parent link="torso"/>
  <child link="left_upper_arm"/>
  <origin xyz="0.15 0.1 0" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <limit lower="-1.57" upper="1.57" effort="50" velocity="2"/>
</joint>

<joint name="left_shoulder_yaw" type="revolute">
  <parent link="left_upper_arm"/>
  <child link="left_forearm"/>
  <origin xyz="0 0 -0.3" rpy="0 0 0"/>
  <axis xyz="1 0 0"/>
  <limit lower="-0.78" upper="0.78" effort="30" velocity="2"/>
</joint>

<joint name="left_elbow" type="revolute">
  <parent link="left_forearm"/>
  <child link="left_hand"/>
  <origin xyz="0 0 -0.25" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <limit lower="0" upper="2.35" effort="20" velocity="3"/>
</joint>
```

### Transmission Elements

For hardware integration, URDF includes transmission elements that define how actuators connect to joints:

```xml
<transmission name="left_elbow_trans">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="left_elbow">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
  </joint>
  <actuator name="left_elbow_motor">
    <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>
```

## Introduction to Xacro for Complex Models

### Why Xacro is Essential for Humanoid Robots

Xacro (XML Macros) extends URDF with programming-like features that are essential for complex humanoid models:

- **Macros**: Reusable components for similar parts (e.g., fingers, toes)
- **Properties**: Parameterization for different robot configurations
- **Mathematical Expressions**: Calculations for complex geometries
- **Inclusion**: Modular organization of robot descriptions

### Basic Xacro Concepts

```xml
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="humanoid_robot">

  <!-- Properties for parameterization -->
  <xacro:property name="M_PI" value="3.1415926535897931"/>
  <xacro:property name="torso_height" value="0.5"/>
  <xacro:property name="arm_length" value="0.7"/>

  <!-- Macro for creating limb segments -->
  <xacro:macro name="limb_segment" params="name length radius parent *origin">
    <link name="${name}">
      <visual>
        <geometry>
          <cylinder length="${length}" radius="${radius}"/>
        </geometry>
        <origin xyz="0 0 ${length/2}" rpy="0 0 0"/>
      </visual>
      <collision>
        <geometry>
          <cylinder length="${length}" radius="${radius}"/>
        </geometry>
        <origin xyz="0 0 ${length/2}" rpy="0 0 0"/>
      </collision>
      <inertial>
        <mass value="${length * radius * 2}"/>
        <inertia ixx="1" ixy="0" ixz="0" iyy="1" iyz="0" izz="1"/>
      </inertial>
    </link>
  </xacro:macro>

  <!-- Using the macro -->
  <xacro:limb_segment name="upper_arm" length="0.3" radius="0.05" parent="torso">
    <origin xyz="0.1 0 0" rpy="0 0 0"/>
  </xacro:limb_segment>

</robot>
```

## Advanced Xacro Techniques for Humanoid Modeling

### Parameterized Humanoid Body Parts

```xml
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="advanced_humanoid">

  <!-- Body dimensions -->
  <xacro:property name="torso_width" value="0.3"/>
  <xacro:property name="torso_depth" value="0.2"/>
  <xacro:property name="torso_height" value="0.5"/>

  <xacro:property name="head_radius" value="0.15"/>
  <xacro:property name="neck_length" value="0.1"/>

  <xacro:property name="arm_length" value="0.35"/>
  <xacro:property name="forearm_length" value="0.3"/>
  <xacro:property name="arm_radius" value="0.05"/>

  <xacro:property name="leg_length" value="0.45"/>
  <xacro:property name="shin_length" value="0.4"/>
  <xacro:property name="leg_radius" value="0.07"/>

  <!-- Macro for creating a humanoid limb -->
  <xacro:macro name="humanoid_limb" params="name side type parent xyz rpy">
    <xacro:if value="${type == 'arm'}">
      <!-- Arm-specific structure -->
      <link name="${side}_${name}_upper">
        <visual>
          <geometry>
            <cylinder length="${arm_length}" radius="${arm_radius}"/>
          </geometry>
          <origin xyz="0 0 ${arm_length/2}" rpy="0 0 0"/>
        </visual>
        <collision>
          <geometry>
            <cylinder length="${arm_length}" radius="${arm_radius}"/>
          </geometry>
          <origin xyz="0 0 ${arm_length/2}" rpy="0 0 0"/>
        </collision>
        <inertial>
          <mass value="2"/>
          <inertia ixx="0.05" ixy="0.0" ixz="0.0" iyy="0.05" iyz="0.0" izz="0.005"/>
        </inertial>
      </link>

      <joint name="${side}_${name}_shoulder" type="revolute">
        <parent link="${parent}"/>
        <child link="${side}_${name}_upper"/>
        <origin xyz="${xyz}" rpy="${rpy}"/>
        <axis xyz="0 1 0"/>
        <limit lower="-2.0" upper="1.5" effort="100" velocity="2"/>
      </joint>

      <link name="${side}_${name}_lower">
        <visual>
          <geometry>
            <cylinder length="${forearm_length}" radius="${arm_radius*0.8}"/>
          </geometry>
          <origin xyz="0 0 ${forearm_length/2}" rpy="0 0 0"/>
        </visual>
        <collision>
          <geometry>
            <cylinder length="${forearm_length}" radius="${arm_radius*0.8}"/>
          </geometry>
          <origin xyz="0 0 ${forearm_length/2}" rpy="0 0 0"/>
        </collision>
        <inertial>
          <mass value="1.5"/>
          <inertia ixx="0.03" ixy="0.0" ixz="0.0" iyy="0.03" iyz="0.0" izz="0.003"/>
        </inertial>
      </link>

      <joint name="${side}_${name}_elbow" type="revolute">
        <parent link="${side}_${name}_upper"/>
        <child link="${side}_${name}_lower"/>
        <origin xyz="0 0 ${arm_length}" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="0" upper="2.5" effort="80" velocity="2"/>
      </joint>
    </xacro:if>

    <xacro:if value="${type == 'leg'}">
      <!-- Leg-specific structure -->
      <link name="${side}_${name}_upper">
        <visual>
          <geometry>
            <cylinder length="${leg_length}" radius="${leg_radius}"/>
          </geometry>
          <origin xyz="0 0 ${-leg_length/2}" rpy="0 0 0"/>
        </visual>
        <collision>
          <geometry>
            <cylinder length="${leg_length}" radius="${leg_radius}"/>
          </geometry>
          <origin xyz="0 0 ${-leg_length/2}" rpy="0 0 0"/>
        </collision>
        <inertial>
          <mass value="3"/>
          <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.01"/>
        </inertial>
      </link>

      <joint name="${side}_${name}_hip" type="revolute">
        <parent link="${parent}"/>
        <child link="${side}_${name}_upper"/>
        <origin xyz="${xyz}" rpy="${rpy}"/>
        <axis xyz="0 1 0"/>
        <limit lower="-1.5" upper="0.5" effort="150" velocity="1.5"/>
      </joint>

      <link name="${side}_${name}_lower">
        <visual>
          <geometry>
            <cylinder length="${shin_length}" radius="${leg_radius*0.9}"/>
          </geometry>
          <origin xyz="0 0 ${-shin_length/2}" rpy="0 0 0"/>
        </visual>
        <collision>
          <geometry>
            <cylinder length="${shin_length}" radius="${leg_radius*0.9}"/>
          </geometry>
          <origin xyz="0 0 ${-shin_length/2}" rpy="0 0 0"/>
        </collision>
        <inertial>
          <mass value="2.5"/>
          <inertia ixx="0.08" ixy="0.0" ixz="0.0" iyy="0.08" iyz="0.0" izz="0.008"/>
        </inertial>
      </link>

      <joint name="${side}_${name}_knee" type="revolute">
        <parent link="${side}_${name}_upper"/>
        <child link="${side}_${name}_lower"/>
        <origin xyz="0 0 ${-leg_length}" rpy="0 0 0"/>
        <axis xyz="0 1 0"/>
        <limit lower="0" upper="2.0" effort="120" velocity="1.5"/>
      </joint>
    </xacro:if>
  </xacro:macro>

  <!-- Robot base -->
  <link name="base_link">
    <visual>
      <geometry>
        <box size="${torso_width} ${torso_depth} ${torso_height}"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <box size="${torso_width} ${torso_depth} ${torso_height}"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="20"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <!-- Create limbs using the macro -->
  <xacro:humanoid_limb name="arm" side="left" type="arm" parent="base_link"
                       xyz="0.15 0.1 0.1" rpy="0 0 0"/>
  <xacro:humanoid_limb name="arm" side="right" type="arm" parent="base_link"
                       xyz="0.15 -0.1 0.1" rpy="0 0 0"/>
  <xacro:humanoid_limb name="leg" side="left" type="leg" parent="base_link"
                       xyz="0 -0.1 -0.25" rpy="0 0 0"/>
  <xacro:humanoid_limb name="leg" side="right" type="leg" parent="base_link"
                       xyz="0 0.1 -0.25" rpy="0 0 0"/>

</robot>
```

### Advanced Xacro Features

#### Conditional Elements

```xml
<!-- Conditional elements based on robot configuration -->
<xacro:property name="has_lidar" value="true"/>
<xacro:property name="lidar_type" value="2d"/>

<xacro:macro name="sensor_mount" params="name parent_link xyz rpy">
  <link name="${name}_mount">
    <visual>
      <geometry>
        <cylinder length="0.02" radius="0.05"/>
      </geometry>
    </visual>
    <collision>
      <geometry>
        <cylinder length="0.02" radius="0.05"/>
      </geometry>
    </collision>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>

  <joint name="${name}_mount_joint" type="fixed">
    <parent link="${parent_link}"/>
    <child link="${name}_mount"/>
    <origin xyz="${xyz}" rpy="${rpy}"/>
  </joint>

  <xacro:if value="${has_lidar}">
    <xacro:if value="${lidar_type == '2d'}">
      <link name="${name}_link">
        <visual>
          <geometry>
            <cylinder length="0.05" radius="0.035"/>
          </geometry>
        </visual>
        <collision>
          <geometry>
            <cylinder length="0.05" radius="0.035"/>
          </geometry>
        </collision>
        <inertial>
          <mass value="0.5"/>
          <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.002"/>
        </inertial>
      </link>

      <joint name="${name}_joint" type="fixed">
        <parent link="${name}_mount"/>
        <child link="${name}_link"/>
        <origin xyz="0 0 0.025" rpy="0 0 0"/>
      </joint>
    </xacro:if>
  </xacro:if>
</xacro:macro>
```

#### Mathematical Expressions

```xml
<!-- Using mathematical expressions in Xacro -->
<xacro:property name="pi" value="3.1415926535897931"/>
<xacro:property name="wheel_diameter" value="0.15"/>
<xacro:property name="wheel_radius" value="${wheel_diameter / 2.0}"/>
<xacro:property name="wheel_circumference" value="${pi * wheel_diameter}"/>

<!-- Calculating positions based on other parameters -->
<xacro:property name="robot_width" value="0.6"/>
<xacro:property name="wheel_x_offset" value="${robot_width / 2.0}"/>
```

#### File Inclusion

```xml
<!-- Including other Xacro files for modular design -->
<xacro:include filename="$(find robot_description)/urdf/materials.xacro"/>
<xacro:include filename="$(find robot_description)/urdf/gazebo.xacro"/>
<xacro:include filename="$(find robot_description)/urdf/common_properties.xacro"/>

<!-- Including specific body parts -->
<xacro:include filename="$(find robot_description)/urdf/humanoid/arms.xacro"/>
<xacro:include filename="$(find robot_description)/urdf/humanoid/legs.xacro"/>
<xacro:include filename="$(find robot_description)/urdf/humanoid/head.xacro"/>
```

## Visual and Collision Properties for Humanoid Robots

### Visual Elements

Visual elements define how the robot appears in visualization tools:

```xml
<link name="head_link">
  <visual>
    <!-- Origin defines the position/orientation of the visual geometry -->
    <origin xyz="0 0 0" rpy="0 0 0"/>

    <!-- Geometry can be primitive shapes or meshes -->
    <geometry>
      <sphere radius="0.1"/>
      <!-- Or for more detail: -->
      <!-- <mesh filename="package://robot_description/meshes/head.dae"/> -->
    </geometry>

    <!-- Material defines the appearance -->
    <material name="skin">
      <color rgba="0.8 0.6 0.4 1.0"/>
      <!-- Or reference a material defined elsewhere -->
      <!-- <name>human_skin</name> -->
    </material>
  </visual>
</link>
```

### Collision Elements

Collision elements define geometry used for collision detection:

```xml
<link name="torso_link">
  <collision>
    <!-- Often simplified compared to visual geometry for performance -->
    <geometry>
      <box size="0.3 0.2 0.5"/>
    </geometry>
  </collision>

  <!-- Multiple collision elements for complex shapes -->
  <collision>
    <origin xyz="0 0 0.1" rpy="0 0 0"/>
    <geometry>
      <cylinder length="0.3" radius="0.1"/>
    </geometry>
  </collision>
</link>
```

### Inertial Properties

Inertial properties are crucial for dynamics simulation:

```xml
<link name="arm_link">
  <inertial>
    <mass value="1.5"/>
    <!-- Origin of the inertial reference frame -->
    <origin xyz="0 0 0.15" rpy="0 0 0"/>
    <!-- Inertia tensor (symmetric 3x3 matrix) -->
    <inertia ixx="0.01" ixy="0.0" ixz="0.001" iyy="0.01" iyz="0.0" izz="0.002"/>
  </inertial>
</link>
```

## Gazebo Integration for Simulation

### Gazebo-Specific Elements

```xml
<!-- Gazebo-specific properties for simulation -->
<gazebo reference="head_link">
  <material>Gazebo/Blue</material>
  <turnGravityOff>false</turnGravityOff>
</gazebo>

<!-- Gazebo plugins for sensors -->
<gazebo reference="lidar_link">
  <sensor type="ray" name="head_lidar">
    <pose>0 0 0 0 0 0</pose>
    <visualize>true</visualize>
    <update_rate>10</update_rate>
    <ray>
      <scan>
        <horizontal>
          <samples>720</samples>
          <resolution>1</resolution>
          <min_angle>-1.570796</min_angle>
          <max_angle>1.570796</max_angle>
        </horizontal>
      </scan>
      <range>
        <min>0.1</min>
        <max>30.0</max>
        <resolution>0.01</resolution>
      </range>
    </ray>
    <plugin name="lidar_controller" filename="libgazebo_ros_ray_sensor.so">
      <ros>
        <namespace>/head_lidar</namespace>
        <remapping>~/out:=scan</remapping>
      </ros>
      <output_type>sensor_msgs/LaserScan</output_type>
    </plugin>
  </sensor>
</gazebo>
```

## Best Practices for Humanoid Robot Descriptions

### Organization and Structure

1. **Modular Design**: Separate different body parts into different files
2. **Consistent Naming**: Use consistent naming conventions (e.g., left_arm_joint1)
3. **Parameterization**: Use properties for easy configuration changes
4. **Documentation**: Comment complex sections and explain design choices

### Performance Considerations

1. **Collision Simplification**: Use simpler geometries for collision than visual
2. **Mesh Optimization**: Optimize mesh complexity for real-time performance
3. **Inertial Approximation**: Use reasonable approximations for complex shapes
4. **Joint Limits**: Set realistic joint limits based on physical constraints

### Validation and Debugging

```xml
<!-- Example of a well-structured humanoid URDF with validation considerations -->
<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="validated_humanoid">

  <!-- Include common definitions -->
  <xacro:include filename="$(find robot_description)/urdf/common_properties.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/materials.xacro"/>

  <!-- Base link with proper inertial properties -->
  <link name="base_link">
    <inertial>
      <mass value="50.0"/>
      <origin xyz="0 0 0.5" rpy="0 0 0"/>
      <inertia ixx="5.0" ixy="0.0" ixz="0.0" iyy="5.0" iyz="0.0" izz="8.0"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.5" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.3 1.0"/>
      </geometry>
      <material name="robot_gray"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.5" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.3 1.0"/>
      </geometry>
    </collision>
  </link>

  <!-- Properly defined kinematic chain -->
  <joint name="torso_joint" type="fixed">
    <parent link="base_link"/>
    <child link="torso"/>
    <origin xyz="0 0 0.5" rpy="0 0 0"/>
  </joint>

  <link name="torso">
    <inertial>
      <mass value="15.0"/>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="0.5"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.2 0.6"/>
      </geometry>
      <material name="robot_gray"/>
    </visual>
    <collision>
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <geometry>
        <box size="0.3 0.2 0.6"/>
      </geometry>
    </collision>
  </link>

</robot>
```

## Tools for URDF/Xacro Development

### ROS 2 URDF Tools

```bash
# Check URDF validity
check_urdf /path/to/robot.urdf

# Visualize robot model
ros2 run rviz2 rviz2

# Parse Xacro to URDF
ros2 run xacro xacro /path/to/robot.xacro > output.urdf

# View robot model in RViz
ros2 run robot_state_publisher robot_state_publisher --ros-args -p robot_description:=$(ros2 pkg prefix robot_description)/share/robot_description/urdf/robot.urdf
```

### Debugging Techniques

1. **Use check_urdf**: Validate URDF syntax and structure
2. **Visualize in RViz**: Check if the model appears correctly
3. **Check TF tree**: Ensure all transforms are properly connected
4. **Simulation testing**: Test in Gazebo to verify kinematics work correctly

## Common Pitfalls and Solutions

### Kinematic Loop Issues

Humanoid robots can create kinematic loops (e.g., when hands touch):

```xml
<!-- Solution: Break loops with fixed joints or use constraints -->
<joint name="hand_constraint" type="fixed">
  <parent link="left_hand"/>
  <child link="object_grasped"/>
  <origin xyz="0 0 0" rpy="0 0 0"/>
</joint>
```

### Inertial Property Issues

Incorrect inertial properties can cause simulation instability:

```xml
<!-- Properly calculated inertial properties -->
<inertial>
  <mass value="1.0"/>
  <origin xyz="0 0 0.1" rpy="0 0 0"/>
  <!-- Ensure diagonal elements are positive -->
  <!-- Ensure triangle inequality: ixx + iyy >= izz, etc. -->
  <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.005"/>
</inertial>
```

## Summary

URDF and Xacro provide powerful tools for describing complex humanoid robots with accurate kinematic structures, visual representations, and dynamic properties. The hierarchical structure of links and joints enables the modeling of sophisticated multi-degree-of-freedom systems, while Xacro's macro and parameterization features help manage the complexity inherent in humanoid robot descriptions. Proper use of visual, collision, and inertial elements ensures that robot models work correctly in both visualization and simulation environments. Following best practices for organization, performance, and validation helps create robust and maintainable robot descriptions suitable for real-world humanoid robotics applications.

## Key Takeaways

- URDF describes robot geometry, kinematics, and dynamics using links and joints
- Xacro extends URDF with macros, properties, and programming features
- Humanoid robots require careful kinematic chain design for natural movement
- Visual, collision, and inertial elements must be properly defined for simulation
- Modular organization and parameterization improve maintainability
- Validation and debugging tools ensure model correctness
- Performance considerations require balancing detail with computational efficiency

## References and Further Reading

1. URDF Documentation: http://wiki.ros.org/urdf
2. Xacro Documentation: http://wiki.ros.org/xacro
3. "Robotics, Vision and Control" by Peter Corke
4. "A Mathematical Introduction to Robotic Manipulation" by Murray, Li, and Sastry
5. Gazebo Robot Description Tutorial: http://gazebosim.org/tutorials/?tut=ros_urdf